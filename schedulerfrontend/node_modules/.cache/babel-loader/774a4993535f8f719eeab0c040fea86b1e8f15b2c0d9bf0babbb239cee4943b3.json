{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport moment from 'moment';\nimport { get } from '../../callAPI';\nimport spinner from '../spinner.vue';\nexport default {\n  name: \"commonLogs\",\n  components: {\n    spinner\n  },\n  data() {\n    return {\n      log: 'Common-Logs',\n      logs: [],\n      taskNames: [],\n      taskName: '',\n      loader: true,\n      filteredData: [],\n      chooseItemsPerPage: [10, 20, 30, 40, 50],\n      itemsPerPage: 10,\n      currentPage: 1\n    };\n  },\n  mounted() {\n    // Get list of item\n    const taskNames = JSON.parse(localStorage.getItem('taskNames'));\n    console.log('Task Names: ', taskNames);\n    this.taskNames = taskNames;\n    this.taskName = this.taskNames[0];\n    console.log('Task Names: ', this.taskNames, 'task name: ', this.taskName);\n    get('/logs/getCommonLogs').then(response => {\n      console.log(\"Response form Backend: \", response);\n      this.logs = response.data;\n      this.loader = false;\n\n      // Filter on start according to taskType\n      this.filteredData = [];\n      const taskType = localStorage.getItem('taskType');\n      for (const log of this.logs) {\n        if (log.taskType === taskType) {\n          this.filteredData.push(log);\n        }\n      }\n      this.filter();\n      console.log('filteredData', this.filteredData[0]);\n    }).catch(error => {\n      // Handle the error\n      console.log(\"Error Occured!\", error);\n    });\n  },\n  methods: {\n    dateFormat(date) {\n      return moment(date).format('Do MMM YYYY, h:mm:ss a');\n    },\n    filter() {\n      this.filteredData = [];\n      for (const log of this.logs) {\n        if (log.taskName === this.taskName) {\n          this.filteredData.push(log);\n        }\n      }\n    },\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    getPageRange() {\n      const range = [];\n      const totalPages = this.totalPages;\n      const currentPage = this.currentPage;\n      if (totalPages <= 3) {\n        for (let i = 1; i <= totalPages; i++) {\n          range.push(i);\n        }\n      } else {\n        if (currentPage <= 2) {\n          range.push(1, 2, 3);\n        } else if (currentPage >= totalPages - 1) {\n          range.push(totalPages - 2, totalPages - 1, totalPages);\n        } else {\n          range.push(currentPage - 1, currentPage, currentPage + 1);\n        }\n      }\n      return range.filter(page => page > 0 && page <= totalPages);\n    }\n  },\n  computed: {\n    totalPages() {\n      return Math.ceil(this.filteredData.length / this.itemsPerPage);\n    },\n    paginatedItems() {\n      const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n      const endIndex = startIndex + this.itemsPerPage;\n      return this.filteredData.slice(startIndex, endIndex);\n    }\n  }\n};","map":{"version":3,"names":["moment","get","spinner","name","components","data","log","logs","taskNames","taskName","loader","filteredData","chooseItemsPerPage","itemsPerPage","currentPage","mounted","JSON","parse","localStorage","getItem","console","then","response","taskType","push","filter","catch","error","methods","dateFormat","date","format","changePage","page","totalPages","getPageRange","range","i","computed","Math","ceil","length","paginatedItems","startIndex","endIndex","slice"],"sources":["C:\\Users\\admin\\Documents\\Files\\FrontEnd-Development\\schedulerfrontend\\src\\components\\Scheduler\\commonLogs.vue"],"sourcesContent":["<template>\n\n    <spinner v-if=\"loader\"></spinner>\n\n    <div class=\"master container-fluid\">\n        <div class=\"allData\">\n            <div class=\"heading row\">\n                <h3>Common-Logs</h3>\n            </div>\n\n            <div class=\"filter\">Task Name\n                <select v-model=\"taskName\" @change=\"filter()\" style=\"width: 100px;\">\n                    <option v-for=\"taskName in taskNames\" :key=\"taskName\" :value=\"taskName\">{{ taskName }}</option>\n                </select>\n            </div>\n\n            <div class=\"allDataDiv\" style=\"\">\n                <table class=\"table table-hover\">\n                    <thead>\n                        <tr>\n                            <th scope=\"col\">LogID</th>\n                            <th scope=\"col\">LAST START TIME</th>\n                            <th scope=\"col\">NEXT RUN TIME</th>\n                            <th scope=\"col\">EXECUTION STATUS</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"data in (paginatedItems)\" :key=\"data.jobName\">\n                            <td>{{ data.logID }}</td>\n                            <td>{{ dateFormat(data.startTime) }}</td>\n                            <td>{{ dateFormat(data.nextStartTime) }}</td>\n                            <td>{{ data.executionStatus }}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <div class=\"footerDiv mt-1\">\n\n                <select v-model=\"itemsPerPage\" class=\"form-select form-select-sm\" style=\"width: 70px;\">\n                    <option v-for=\"items in chooseItemsPerPage\" :key=\"items\" :value=\"items\">{{ items }}</option>\n                </select>\n\n                <ul class=\"pagination pagination-sm justify-content-center mx-auto\">\n                    <li class=\"page-item\" :class=\"{ 'disabled': currentPage === 1 }\">\n                        <a class=\"page-link\" @click=\"changePage(currentPage - 1)\" aria-label=\"Previous\">\n                            <span aria-hidden=\"true\">Previous</span>\n                        </a>\n                    </li>\n\n                    <li v-if=\"currentPage > 2\">\n                        <a class=\"page-link\" @click=\"changePage(1)\">1</a>\n                    </li>\n\n                    <li v-if=\"currentPage > 3\">\n                        <span class=\"ellipsis\">...</span>\n                    </li>\n\n                    <li v-for=\"pageNumber in getPageRange()\" :key=\"pageNumber\" class=\"page-item\"\n                        :class=\"{ 'active': currentPage === pageNumber }\">\n                        <a class=\"page-link\" @click=\"changePage(pageNumber)\">{{ pageNumber }}</a>\n                    </li>\n\n                    <li v-if=\"currentPage < totalPages - 2\">\n                        <span class=\"ellipsis\">...</span>\n                    </li>\n\n                    <li v-if=\"currentPage < totalPages - 1\">\n                        <a class=\"page-link\" @click=\"changePage(totalPages)\">{{ totalPages }}</a>\n                    </li>\n\n                    <li class=\"page-item\" :class=\"{ 'disabled': currentPage === totalPages }\">\n                        <a class=\"page-link\" @click=\"changePage(currentPage + 1)\" aria-label=\"Next\">\n                            <span aria-hidden=\"true\">Next</span>\n                        </a>\n                    </li>\n                </ul>\n\n                <button @click=\"$router.back()\" class=\"btn btn-secondary btn-sm\">Back</button>\n            </div>\n\n        </div>\n    </div>\n</template>\n  \n<script>\nimport moment from 'moment';\nimport { get } from '../../callAPI'\nimport spinner from '../spinner.vue'\n\nexport default {\n    name: \"commonLogs\",\n    components: {\n        spinner,\n    },\n    data() {\n        return {\n            log: 'Common-Logs',\n            logs: [],\n\n            taskNames: [],\n            taskName: '',\n\n            loader: true,\n\n            filteredData: [],\n\n            chooseItemsPerPage: [10, 20, 30, 40, 50],\n            itemsPerPage: 10,\n            currentPage: 1,\n        }\n    },\n\n    mounted() {\n        // Get list of item\n        const taskNames = JSON.parse(localStorage.getItem('taskNames'));\n        console.log('Task Names: ', taskNames);\n        this.taskNames = taskNames;\n        this.taskName = this.taskNames[0]\n        console.log('Task Names: ', this.taskNames, 'task name: ', this.taskName);\n\n        get('/logs/getCommonLogs')\n            .then((response) => {\n                console.log(\"Response form Backend: \", response);\n                this.logs = response.data\n                this.loader = false\n\n                // Filter on start according to taskType\n                this.filteredData = [];\n                const taskType = localStorage.getItem('taskType');\n                for (const log of this.logs) {\n                    if (log.taskType === taskType) {\n                        this.filteredData.push(log);\n                    }\n                }\n                this.filter();\n                console.log('filteredData', this.filteredData[0]);\n            })\n            .catch((error) => {\n                // Handle the error\n                console.log(\"Error Occured!\", error);\n            })\n    },\n\n    methods: {\n        dateFormat(date) {\n            return moment(date).format('Do MMM YYYY, h:mm:ss a');\n        },\n\n        filter() {\n            this.filteredData = [];\n            for (const log of this.logs) {\n                if (log.taskName === this.taskName) {\n                    this.filteredData.push(log);\n                }\n            }\n        },\n\n        changePage(page) {\n            if (page >= 1 && page <= this.totalPages) {\n                this.currentPage = page;\n            }\n        },\n\n        getPageRange() {\n            const range = [];\n            const totalPages = this.totalPages;\n            const currentPage = this.currentPage;\n\n            if (totalPages <= 3) {\n                for (let i = 1; i <= totalPages; i++) {\n                    range.push(i);\n                }\n            } else {\n                if (currentPage <= 2) {\n                    range.push(1, 2, 3);\n                } else if (currentPage >= totalPages - 1) {\n                    range.push(totalPages - 2, totalPages - 1, totalPages);\n                } else {\n                    range.push(currentPage - 1, currentPage, currentPage + 1);\n                }\n            }\n\n            return range.filter(page => page > 0 && page <= totalPages);\n        },\n    },\n\n    computed: {\n\n        totalPages() {\n            return Math.ceil(this.filteredData.length / this.itemsPerPage);\n        },\n\n        paginatedItems() {\n            const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n            const endIndex = startIndex + this.itemsPerPage;\n            return this.filteredData.slice(startIndex, endIndex);\n        },\n    }\n};\n\n</script>\n  \n<style scoped>\n\n@media (max-width: 767px) {\n    .master {\n        margin-left: 1%;\n    }\n}\n\n.allData{\n    text-align: center;\n    justify-content: center;\n}\n\n.filter {\n    text-align: right;\n    margin: 5px;\n    justify-content: right;\n    margin-right: 0px;\n}\n\n.allDataDiv {\n    padding: auto;\n    width: 100%;\n    height: 410px;\n    overflow: scroll;\n}\n\nthead tr th {\n    background-color: lightskyblue;\n    font-size: 14px;\n}\n\ntbody tr td {\n    font-size: 12px;\n}\n\nthead {\n    position: sticky;\n    top: 0;\n}\n\n.heading {\n    height: 45px;\n    background: rgb(247, 149, 238);\n    padding-top: 10px;\n}\n\n.footerDiv {\n    width: 100%;\n    height: 30px;\n    display: flex;\n    justify-content: flex-end;\n    background-color: #c9c9c9;\n}\n\n@media (max-width: 1200px) {\n    .row {\n        margin-left: 0px;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n    }\n    .row>h3{\n        display: contents;\n    }\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}